version: 1
backend:
  phases:
    build:
      commands:
        - cd server
        - npm ci
        - npm run build
frontend:
  phases:
    preBuild:
      commands:
        - cd $CODEBUILD_SRC_DIR/Rahi_Travel_App
        - pwd
        - ls -la
        - echo "Checking for package files..."
        - ls -la package*
        - npm ci
    build:
      commands:
        - cd $CODEBUILD_SRC_DIR/Rahi_Travel_App
        - echo "Current directory:"
        - pwd
        - echo "Files in directory:"
        - ls -la
        - echo "Running frontend build..."
        - npx vite build
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
      - server/node_modules/**/* 